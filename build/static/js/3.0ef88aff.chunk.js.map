{"version":3,"sources":["assets/images/logo_senseStudy.svg","pages/login/forget/Forget.scss","pages/login/Login.scss","pages/login/forget/Forget.js","pages/login/Login.js","api/Login.js"],"names":["module","exports","__webpack_require__","p","container","top","title","content","button","bigContainer","wrap","inUser","inPaw","eyeIcon","close_eyeIcon","bSubmit","Forget","disappear","_this","props","onChange","visible","display","_16_7_0_react_default","a","createElement","className","styles","onClick","this","React","Component","FormItem","form_default","Item","testData","mockjs","mock","list|100","name","value|1-100","type|0-2","console","log","Login","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","toLogin","_ref","asyncToGenerator","regenerator_default","mark","_callee","values","conditions","result","_context","prev","next","notification_default","destroy","objectSpread","params","username","password","toBASE64","request","method","body","sent","errorCode","data","window","localStorage","setItem","token","roles","id","history","push","pathname","info","message","errorMessage","setState","loading","t0","stop","_x","apply","arguments","handleSubmit","e","preventDefault","form","validateFields","err","forget","state","eyeState","newState","getItem","clear","_this2","login_forget_Forget","getChange","getFieldDecorator","style","width","height","src","logo","alt","onSubmit","rules","required","input_default","prefix","icon_default","type","color","placeholder","button_default","htmlType","__webpack_exports__","create"],"mappings":"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","file":"static/js/3.0ef88aff.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo_senseStudy.ba45bc3e.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Forget_container__rhPjF\",\"top\":\"Forget_top__1e1DQ\",\"title\":\"Forget_title__3XJOO\",\"content\":\"Forget_content__is1Rj\",\"button\":\"Forget_button__NuLn1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bigContainer\":\"Login_bigContainer__3wGB8\",\"container\":\"Login_container__2Ok6x\",\"wrap\":\"Login_wrap__pXE-M\",\"title\":\"Login_title__1eCjk\",\"inUser\":\"Login_inUser__GEuu8\",\"inPaw\":\"Login_inPaw__1Q-Bg\",\"eyeIcon\":\"Login_eyeIcon__2vTGd\",\"close_eyeIcon\":\"Login_close_eyeIcon__2WW8F\",\"bSubmit\":\"Login_bSubmit__nsx06\"};","/**\n * Created by guyanyan on 2018/12/13.\n */\nimport React from 'react';\nimport styles from './Forget.scss';\n\n class Forget extends React.Component {\n   disappear=()=>{\n       let newState={\n           visible:false,\n           display:\"block\"\n       };\n       this.props.onChange(newState);\n };\n    render() {\n        return(\n            <div className={styles.container}>\n                <div className={styles.title}><span>忘记密码</span></div>\n                <div className={styles.content}><span>请联系caiwenhui@sensetime.com重置密码</span></div>\n                <div className={styles.button} onClick={this.disappear}><span>知道了</span></div>\n            </div>\n        )\n    }\n\n}\nexport default  Forget;\n","/**\n * Created by hayzroyanghuanzhou on 2018/12/3.\n */\nimport React from 'react';\nimport {Form, Icon, Input, Button,notification} from 'antd';\nimport mockjs from 'mockjs';\nimport {IO_Login} from '../../api/Login';\nimport {toBASE64} from '../../utils/utils';\nimport logo from '../../assets/images/logo_senseStudy.svg';\nimport Forget from './forget/Forget';\nimport styles from './Login.scss';\nconst FormItem = Form.Item;\n// mockjs使用\nconst testData = mockjs.mock({\n    'list|100': [{name: '@city', 'value|1-100': 150, 'type|0-2': 1}],\n});\nconsole.log(testData);\nclass Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            visible: false,\n            eyeState:1, loading:false,\n            display:\"block\",\n        };\n    }\n    getChange(newState){\n        if(newState){\n            this.setState(newState);\n        }\n    };\n    componentDidMount() {\n        console.log(window.localStorage.getItem(\"token\"));\n        window.localStorage.clear();\n        console.log(window.localStorage.getItem(\"token\"));\n    }\n\n    toLogin = async(values) => {\n        notification.destroy();\n        console.log('this.props');\n        console.log(this.props);\n        console.log(values);\n        let conditions  = {...values};\n        console.log(conditions);\n        // window.document.getElementsByClassName('gggg')[0].innerHTML = '啊啊啊啊';\n        try {\n            const result = await IO_Login({\n                username: conditions.username,\n                password: toBASE64(conditions.password),\n            });\n            console.log(result);\n            if (result.errorCode === 1000) {\n                // todo 请求正确返回\n                console.log(result.data);\n                window.localStorage.setItem(\"token\", result.data.token.token);\n                window.localStorage.setItem(\"name\", result.data.username);\n                window.localStorage.setItem(\"role\", result.data.roles[0]);\n                console.log(result.data.roles[0]);\n                window.localStorage.setItem(\"id\", result.data.id);\n                if(result.data.roles[0]===\"ROLE_BUSINESSMAN\"){\n                    console.log(result.data.roles[0]);\n                    this.props.history.push({pathname: \"/sale\"});\n                }else{\n                    this.props.history.push({pathname: \"/management\"});\n                }\n            }\n            else {\n                // 后台返回的错误信息\n                // todo 去做请求错误返回的时候的事情\n                notification.info({\n                    message: result.errorMessage\n                });\n                this.setState({\n                    loading:false\n                })\n            }\n            console.log(\"接口拿到的结果：\")\n            console.log(result)\n        }catch (e){\n            console.log(\"异常\")\n            this.setState({\n                loading:false\n            })\n        }\n    };\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                this.setState({loading: true});\n                this.toLogin(values);\n            } else {\n                this.setState({loading: false});\n            }\n        });\n    };\n     forget = ()=>{\n         this.setState({\n             visible:!this.state.visible,\n             display:\"none\"\n         })\n     };\n    render() {\n        let content = (<div/>);\n        if (this.state.visible) {\n            content = (<Forget onChange={newState=>this.getChange(newState)}/>);\n        } else {\n            content = (<div/>)\n        }\n        const { getFieldDecorator } = this.props.form;\n        return (\n            <div className={styles.bigContainer}>\n                <div className={styles.container} style={{display:this.state.display}}>\n                <div className={styles.wrap}>\n                   <img width=\"160px\" height=\"30px\" src={logo} alt=\"图片加载失败\"/>\n                    <Form onSubmit={this.handleSubmit} className=\"\">\n                        <div className={styles.title}><span>销售门户</span></div>\n                        <FormItem>\n                            {getFieldDecorator('username', {\n                                rules: [{ required: true, message: '请输入用户名!' }],\n                            })(\n                                <Input\n                                        prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                                        type=\"text\" placeholder=\"用户名\"  className={styles.inUser}/>\n                            )}\n                        </FormItem>\n                        <FormItem>\n                            {getFieldDecorator('password', {\n                                rules: [{ required: true, message: '请输入密码!' }],\n                            })(\n                                <Input  className={styles.inPaw} type={this.state.eyeState ? \"password\" : \"text\"}\n                                        prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                                        placeholder=\"密码\"/>\n\n                            )}\n\n                        </FormItem>\n                            <div className=\"forget\" onClick={this.forget}>忘记密码？</div>\n                            <Button type=\"primary\"  className={styles.bSubmit}\n                                    htmlType=\"submit\"\n                                    loading={this.state.loading}>\n                                登录\n                            </Button>\n                    </Form>\n                </div>\n            </div>\n                {content}\n            </div>\n\n        )\n    }\n\n\n}\n\n\nexport default  Form.create()(Login);\n","/**\n * Created by hayzroyanghuanzhou on 2018/12/4.\n */\nimport request from '../utils/request';\n\n\n// export async function IO_Login(params) {\n//     return request('/api/v1/auth/login', {\n//         method: 'GET',\n//         body: {\n//             ...params,\n//             // method: 'post',\n//         },\n//     });\n// }\nexport function IO_Login(params) {\n    return request('/api/v1/auth/login', {\n        method: 'POST',\n        body: {\n            ...params,\n        },\n    });\n}\n"],"sourceRoot":""}